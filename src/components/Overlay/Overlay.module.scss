.overlay {
  position: fixed;
  top: 70px;
  left: 0;
  width: 100%;
  height: 100dvh;
  background: linear-gradient(
    135deg,
    rgba(0, 0, 0, 0.4) 0%,
    rgba(0, 0, 0, 0.7) 100%
  );
  z-index: 999;
  backdrop-filter: blur(8px) saturate(150%);

  // Enter animation for backdrop
  animation: backdropEnter $timing-medium $ease-premium;

  // Exit animation class
  &.exiting {
    animation: backdropExit $timing-fast $ease-smooth forwards;

    .overlay_content > * {
      animation: contentExit $timing-fast $ease-smooth forwards !important;
    }
  }

  // N·∫øu variant l√† global th√¨ top = 0, c√≤n global.visible m·ªõi cƒÉn gi·ªØa b·∫±ng flexbox
  &.global {
    top: 0;
  }
  &.global.visible {
    display: flex;
    align-items: center;
    justify-content: center;
  }
}

.overlay_content {
  padding-top: 2rem;
  display: flex;
  justify-content: center;
  align-items: flex-start;
  perspective: 1200px;
  perspective-origin: center center;
  pointer-events: none;

  // CƒÉn gi·ªØa c·∫£ d·ªçc cho global
  &.global {
    align-items: center;
    min-height: 100dvh;
  }

  // Clean 3D variants for e-commerce
  &.slideUp > * {
    animation: slideUp3D $timing-medium $ease-premium;
    transform-style: preserve-3d;
  }

  &.fadeScale > * {
    animation: fadeScale3D $timing-medium $ease-smooth;
    transform-style: preserve-3d;
  }

  &.gentleRise > * {
    animation: gentleRise3D $timing-medium $ease-silk;
    transform-style: preserve-3d;
  }

  &.softBounce > * {
    animation: softBounce3D $timing-medium $ease-bounce;
    transform-style: preserve-3d;
  }

  &.smoothSlide > * {
    animation: smoothSlide3D $timing-medium $ease-premium;
    transform-style: preserve-3d;
  }

  &.cleanPop > * {
    animation: cleanPop3D $timing-fast $ease-smooth;
    transform-style: preserve-3d;
  }

  &.modernLift > * {
    animation: modernLift3D $timing-medium $ease-premium;
    transform-style: preserve-3d;
  }
}

// Backdrop animations
@keyframes backdropEnter {
  0% {
    opacity: 0;
    backdrop-filter: blur(0px) saturate(100%);
    background: linear-gradient(
      135deg,
      rgba(0, 0, 0, 0) 0%,
      rgba(0, 0, 0, 0) 100%
    );
  }
  100% {
    opacity: 1;
    backdrop-filter: blur(8px) saturate(150%);
    background: linear-gradient(
      135deg,
      rgba(0, 0, 0, 0.4) 0%,
      rgba(0, 0, 0, 0.7) 100%
    );
  }
}

@keyframes backdropExit {
  0% {
    opacity: 1;
    backdrop-filter: blur(8px) saturate(150%);
  }
  100% {
    opacity: 0;
    backdrop-filter: blur(0px) saturate(100%);
  }
}

// Clean 3D exit animation
@keyframes contentExit {
  0% {
    opacity: 1;
    transform: scale3d(1, 1, 1) rotateX(0deg) translateY(0px) translateZ(0px);
    filter: blur(0px);
  }
  100% {
    opacity: 0;
    transform: scale3d(0.85, 0.85, 0.85) rotateX(8deg) translateY(20px)
      translateZ(-40px);
    filter: blur(2px);
  }
}

// üì± SLIDE UP 3D - Tr∆∞·ª£t l√™n t·ª´ d∆∞·ªõi
@keyframes slideUp3D {
  0% {
    opacity: 0;
    transform: scale3d(0.95, 0.95, 0.95) translateY(60px) translateZ(-30px);
    filter: blur(1px);
  }

  60% {
    opacity: 0.9;
    transform: scale3d(1.01, 1.01, 1.01) translateY(-5px) translateZ(10px);
    filter: blur(0px);
  }

  100% {
    opacity: 1;
    transform: scale3d(1, 1, 1) translateY(0px) translateZ(0px);
    filter: blur(0px);
  }
}

// ‚ú® FADE SCALE 3D - M·ªù d·∫ßn v√† ph√≥ng to
@keyframes fadeScale3D {
  0% {
    opacity: 0;
    transform: scale3d(0.85, 0.85, 0.85) translateZ(-20px);
    filter: blur(0.5px);
  }

  100% {
    opacity: 1;
    transform: scale3d(1, 1, 1) translateZ(0px);
    filter: blur(0px);
  }
}

// üåü GENTLE RISE 3D - N·ªïi l√™n nh·∫π nh√†ng
@keyframes gentleRise3D {
  0% {
    opacity: 0;
    transform: scale3d(0.92, 0.92, 0.92) rotateX(10deg) translateY(40px)
      translateZ(-25px);
    filter: blur(1px);
    box-shadow: 0 0 0 rgba(0, 0, 0, 0);
  }

  50% {
    opacity: 0.8;
    transform: scale3d(1.02, 1.02, 1.02) rotateX(2deg) translateY(5px)
      translateZ(8px);
    filter: blur(0px);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
  }

  100% {
    opacity: 1;
    transform: scale3d(1, 1, 1) rotateX(0deg) translateY(0px) translateZ(0px);
    filter: blur(0px);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.06);
  }
}

// üéæ SOFT BOUNCE 3D - N·∫£y m·ªÅm m·∫°i
@keyframes softBounce3D {
  0% {
    opacity: 0;
    transform: scale3d(0.8, 0.8, 0.8) translateY(45px) translateZ(-35px);
    filter: blur(1.5px);
  }

  30% {
    opacity: 0.7;
    transform: scale3d(1.05, 1.05, 1.05) translateY(-8px) translateZ(15px);
    filter: blur(0px);
  }

  60% {
    opacity: 0.9;
    transform: scale3d(0.98, 0.98, 0.98) translateY(3px) translateZ(-5px);
    filter: blur(0px);
  }

  100% {
    opacity: 1;
    transform: scale3d(1, 1, 1) translateY(0px) translateZ(0px);
    filter: blur(0px);
  }
}

// üé¨ SMOOTH SLIDE 3D - Tr∆∞·ª£t m∆∞·ª£t m√†
@keyframes smoothSlide3D {
  0% {
    opacity: 0;
    transform: scale3d(0.9, 0.9, 0.9) rotateX(15deg) rotateY(-8deg)
      translateY(-30px) translateX(-20px) translateZ(-40px);
    filter: blur(2px);
  }

  60% {
    opacity: 0.9;
    transform: scale3d(1.03, 1.03, 1.03) rotateX(-2deg) rotateY(1deg)
      translateY(2px) translateX(1px) translateZ(12px);
    filter: blur(0px);
  }

  100% {
    opacity: 1;
    transform: scale3d(1, 1, 1) rotateX(0deg) rotateY(0deg) translateY(0px)
      translateX(0px) translateZ(0px);
    filter: blur(0px);
  }
}

// üí´ CLEAN POP 3D - B·∫≠t ra s·∫°ch s·∫Ω
@keyframes cleanPop3D {
  0% {
    opacity: 0;
    transform: scale3d(0.7, 0.7, 0.7) translateZ(-50px);
    filter: blur(2px);
  }

  50% {
    opacity: 0.8;
    transform: scale3d(1.08, 1.08, 1.08) translateZ(20px);
    filter: blur(0px);
  }

  100% {
    opacity: 1;
    transform: scale3d(1, 1, 1) translateZ(0px);
    filter: blur(0px);
  }
}

// üè¢ MODERN LIFT 3D - N√¢ng l√™n hi·ªán ƒë·∫°i
@keyframes modernLift3D {
  0% {
    opacity: 0;
    transform: scale3d(0.88, 0.88, 0.88) rotateX(20deg) translateY(50px)
      translateZ(-60px);
    filter: blur(3px);
    box-shadow: 0 0 0 rgba(0, 0, 0, 0);
  }

  40% {
    opacity: 0.8;
    transform: scale3d(1.04, 1.04, 1.04) rotateX(-3deg) translateY(-5px)
      translateZ(25px);
    filter: blur(0.5px);
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
  }

  100% {
    opacity: 1;
    transform: scale3d(1, 1, 1) rotateX(0deg) translateY(0px) translateZ(0px);
    filter: blur(0px);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
  }
}
